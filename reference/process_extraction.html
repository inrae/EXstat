<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>process_extraction — process_extraction • EXstat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="process_extraction — process_extraction"><meta name="description" content="Extracts a variable from time series (for example the yearly mean of time series). Extraction can have a specific time step and sampled differently along this time step."><meta property="og:description" content="Extracts a variable from time series (for example the yearly mean of time series). Extraction can have a specific time step and sampled differently along this time step."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EXstat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Explore2_flow_statistics.html">Explore2_flow_statistics</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>process_extraction</h1>

      <div class="d-none name"><code>process_extraction.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extracts a variable from time series (for example the yearly mean of time series). Extraction can have a specific time step and sampled differently along this time step.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_extraction</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  funct <span class="op">=</span> <span class="va">max</span>,</span>
<span>  funct_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  time_step <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  sampling_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  is_date <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  NApct_lim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  NAyear_lim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Seasons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DJF"</span>, <span class="st">"MAM"</span>, <span class="st">"JJA"</span>, <span class="st">"SON"</span><span class="op">)</span>,</span>
<span>  nameEX <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  suffix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  suffix_delimiter <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  compress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  expand <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rmNApct <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rm_duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dev <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data format is a <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> from the tibble package. It needs to have :</p><ul><li><p>Only one column of <a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a> that are regularly spaced and unique for each time serie.</p></li>
<li><p>If there is more than one time serie, at least one column needs to be of <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string for names of time series in order to identify them. If more than one column of identifier is given, they will all be used in order to identify a unique time serie.</p></li>
<li><p>At least one column of <a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a> (or <a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>) on which the process of variable extraction will be perform. More numerical column can be leave but if they are useless, they will be suppressed.</p></li>
</ul><p>e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> data</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>A tibble<span class="sc">:</span> <span class="dv">201</span> × <span class="dv">4</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>   time         Q_obs  Q_sim  ID</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>   <span class="sc">&lt;</span>date<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">2000-02-10</span>   <span class="dv">10</span>     <span class="fl">97.8</span>  serie <span class="dv">1</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="dv">2</span>   <span class="dv">2000-02-11</span>   <span class="dv">19</span>    <span class="sc">-</span><span class="fl">20.5</span>  serie <span class="dv">1</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">2000-02-12</span>   <span class="dv">13</span>    <span class="sc">-</span><span class="fl">76.9</span>  serie <span class="dv">1</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="dv">4</span>   <span class="dv">2000-02-13</span>   <span class="dv">15</span>    <span class="sc">-</span><span class="fl">86.0</span>  serie <span class="dv">1</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    ...</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="dv">103</span> <span class="dv">2001-01-01</span>  <span class="fl">1.3</span>     <span class="dv">1988</span>  serie <span class="dv">2</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="dv">104</span> <span class="dv">2001-01-02</span>  <span class="fl">1.2</span>      <span class="dv">109</span>  serie <span class="dv">2</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="dv">105</span> <span class="dv">2001-01-03</span>  <span class="fl">1.0</span>       <span class="dv">90</span>  serie <span class="dv">2</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="dv">106</span> <span class="dv">2001-01-04</span>  <span class="fl">1.1</span>       <span class="dv">91</span>  serie <span class="dv">2</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>    ...</span></code></pre><p></p></div></dd>


<dt id="arg-funct">funct<a class="anchor" aria-label="anchor" href="#arg-funct"></a></dt>
<dd><p>The function that you want to use for the process of variable extraction. More specificaly, it is possible to give a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> with several functions as element of that <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> and the name that will be used for the extracted column as the names element of each function of that previously defined <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>. A simple case will be <code>funct=mean</code> and a more complicated one <code>funct=list(QA=mean, QJXA=max)</code>. Default max.</p></dd>


<dt id="arg-funct-args">funct_args<a class="anchor" aria-label="anchor" href="#arg-funct-args"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of named arguments needed for each functions provided through <code>funct</code>. This <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> can be a simple <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> if there is only one function given by <code>funct</code>. The argument can relate to a column name in order to specify on which numerical column the extraction will be perfom. For the simple example, <code>funct_args=list("Q_obs", na.rm=TRUE)</code> and for the more complex case <code>funct_args=list(list("Q_obs", na.rm=TRUE), list("Q_sim", na.rm=FALSE))</code>. Default <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>.</p></dd>


<dt id="arg-time-step">time_step<a class="anchor" aria-label="anchor" href="#arg-time-step"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string specifying the time step of the variable extraction process. Possible values are :</p><ul><li><p>"year" for a value per year</p></li>
<li><p>"month" for a value for each month of the year (so 12 values if at least a full year is given)</p></li>
<li><p>"year-month" for a value for each month of each year (so 12 times the number of given year values at the end)</p></li>
<li><p>"season" for a value for each season of th year (so by default 4 values)</p></li>
<li><p>"year-season" for a value for each season of each year (so by default 4 times the number of given year values at the end)</p></li>
<li><p>"yearday" for one value per day of the year (so 365 values at the end if at least a full year is given... but more than one year seems obviously more interesting)
"none" if you want to extract a unique value for the whole time serie
Default <code>"year"</code>.</p></li>
</ul></dd>


<dt id="arg-sampling-period">sampling_period<a class="anchor" aria-label="anchor" href="#arg-sampling-period"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string or a <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> of two <a href="https://rdrr.io/r/base/character.html" class="external-link">characters</a> strings that will indicate how to sample the data for each time step defined by <code>time_step</code>. Hence, the choice of this argument needs to be link with the choice of the time step. For example, for a yearly extraction so if <code>time_step</code> is set to <code>"year"</code>, <code>sampling_period</code> needs to be formated as <code>%m-%d</code> (a month - a day of the year) in order to indicate the start of the sampling of data for the current year. More precisly, if <code>time_step="year"</code> and <code>sampling_period="03-19"</code>, <code>funct</code> will be apply on every data from the 3rd march of each year to the 2nd march of the following one. In this way, it is possible to create a sub-year sampling with a <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> of two <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> strings as <code>sampling_period=c("02-01", "07-31")</code> in order to process data only if the date is between the 1st february and the 31th jully of each year.
<em>not available for now</em> For a monthly (or seasonal) extraction, <code>sampling_period</code> needs to give only day in each month, so for example <code>sampling_period="10"</code> to extract data from the 10th of each month to the 9th of each following month.
Default <code>NULL</code>.</p></dd>


<dt id="arg-period">period<a class="anchor" aria-label="anchor" href="#arg-period"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> of two <a href="https://rdrr.io/r/base/Dates.html" class="external-link">dates</a> (or two unambiguous <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> strings that can be coerced to <a href="https://rdrr.io/r/base/Dates.html" class="external-link">dates</a>) to restrict the period of analysis. As an example, it can be <code>c("1950-01-01", "2020-12-31")</code> to select data from the 1st January of 1950 to the end of December of 2020. The default option is <code>period=NULL</code>, which considers all available data for each time serie.</p></dd>


<dt id="arg-is-date">is_date<a class="anchor" aria-label="anchor" href="#arg-is-date"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. If TRUE, <code>process_extration()</code> will convert the result of the application of <code>funct</code> to a day of the year. The aim is for example to give <code>funct=which.min</code> and if <code>is_date=TRUE</code>, the result will not be the indice of the minimum of the sample but the associated day of the year given by an <a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> (1 is the 1st of january). Default <code>FALSE</code>.</p></dd>


<dt id="arg-napct-lim">NApct_lim<a class="anchor" aria-label="anchor" href="#arg-napct-lim"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>. The maximum percentage of missing values in each sample allowed. If this threshold is exceeded, the value associated to the current sample will be convert to NA. Default <code>NULL</code>.</p></dd>


<dt id="arg-nayear-lim">NAyear_lim<a class="anchor" aria-label="anchor" href="#arg-nayear-lim"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>.The maximum number of continuous missing years allowed. If this threshold is exceeded, the time serie will be split in half around the problematic period and only the longest part will be used for the extraction process. Default <code>NULL</code>.</p></dd>


<dt id="arg-seasons">Seasons<a class="anchor" aria-label="anchor" href="#arg-seasons"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> of <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> strings that indicates the seasonal pattern of a year. All months of the year needs to be contain in the <code>Seasons</code> variable. Give months circulary in a vector in which each element is a character chain of several months identify by the first letter of their names. The default is <code>Seasons=c("DJF", "MAM", "JJA", "SON")</code> but it can be set for example to <code>Seasons=c("MAMJJA", "SONDJF")</code>.</p></dd>


<dt id="arg-nameex">nameEX<a class="anchor" aria-label="anchor" href="#arg-nameex"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string specifying the name of the column of the extracted variable if no name is given in <code>funct</code>. Default is <code>"X"</code>.</p></dd>


<dt id="arg-suffix">suffix<a class="anchor" aria-label="anchor" href="#arg-suffix"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> representing suffixes to be appended to the column names of the extracted variables. This parameter allows handling multiple extraction scenarios. For example, a cumbersome case can be to have a unique function to apply to a multiple list of column. It is possible to give <code>funct=list(QA_obs=mean, QA_sim=mean)</code> and <code>funct_args=list(list("Q_obs", na.rm=TRUE), list("Q_sim", na.rm=TRUE))</code> or simply <code>funct=list(QA=mean)</code> and <code>funct_args=list("Q", na.rm=TRUE)</code> with <code>suffix=c("obs", "sim")</code>. The two approach give the same result. Default <code>NULL</code>.</p></dd>


<dt id="arg-suffix-delimiter">suffix_delimiter<a class="anchor" aria-label="anchor" href="#arg-suffix-delimiter"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string specifies the delimiter to use between the variable name and the suffix if not <code>NULL</code>. The default is <code>"_"</code>.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p><em>in developpement</em> A <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> string <a href="https://rdrr.io/r/base/c.html" class="external-link">vector</a> of column names to keep in the output <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a>. In the current state, <code>keep</code> can only be set to <code>NULL</code> if you don't want to keep anythings in the output besides the usefull column, or <code>"all"</code> if you want to conserve all the initial column in the output column.
Warning : The number of rows in the output with <code>keep="all"</code> will, as a result, be the same as in the input. For example, the extracted value for a year from a daily time series will be assigned to the first day of that year, and <code>NaN</code> will be assigned to every other value in the output. Default <code>NULL</code>.</p></dd>


<dt id="arg-compress">compress<a class="anchor" aria-label="anchor" href="#arg-compress"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. If <code>time_step</code> is set to <code>"month"</code>, <code>"year-month"</code>, <code>"season"</code> or <code>"year-season"</code> should the function return a standard <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> or a compressed one ?  When <code>compress = TRUE</code>, the function will perform a <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a> operation to display the month or season information in columns instead of rows. Default <code>FALSE</code>.</p>
<p>e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># for time_step="season" and compress=FALSE</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># A tibble: 8 × 4</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  ID       <span class="sc">&lt;</span>time    Q    NApct</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="dv">1</span> serie <span class="dv">1</span>  DJF    <span class="dv">1464</span>    <span class="fl">8.6</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="dv">2</span> serie <span class="dv">1</span>  JJA    <span class="dv">1447</span>    <span class="dv">0</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dv">3</span> serie <span class="dv">1</span>  MAM    <span class="dv">1395</span>    <span class="dv">0</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="dv">4</span> serie <span class="dv">1</span>  SON    <span class="dv">1458</span>    <span class="dv">0</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="dv">5</span> serie <span class="dv">2</span>  DJF      <span class="dv">11</span>    <span class="fl">8.6</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="dv">6</span> serie <span class="dv">2</span>  JJA       <span class="dv">2</span>    <span class="dv">0</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="dv">7</span> serie <span class="dv">2</span>  MAM       <span class="dv">1</span>    <span class="dv">0</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="dv">8</span> serie <span class="dv">2</span>  SON       <span class="dv">4</span>    <span class="dv">0</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co"># for time_step="season" and compress=TRUE</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># A tibble: 2 × 5</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a> ID       Q_DJF  Q_JJA  Q_MAM  Q_SON</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a> <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="dv">1</span> serie <span class="dv">1</span>  <span class="dv">1464</span>  <span class="dv">1447</span>   <span class="dv">1395</span>   <span class="dv">1458</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="dv">2</span> serie <span class="dv">2</span>    <span class="dv">11</span>     <span class="dv">2</span>      <span class="dv">1</span>      <span class="dv">4</span></span></code></pre><p></p></div></dd>


<dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. If <code>TRUE</code>, expand the output <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> as a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> for each extracted variable by <code>suffix</code>. Default <code>FALSE</code>.</p></dd>


<dt id="arg-rmnapct">rmNApct<a class="anchor" aria-label="anchor" href="#arg-rmnapct"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. Should the <code>NApct</code> column, which shows the percentage of missing values in the output, be removed ? Default <code>TRUE</code>.</p></dd>


<dt id="arg-rm-duplicates">rm_duplicates<a class="anchor" aria-label="anchor" href="#arg-rm-duplicates"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. Should duplicate time series values be automatically removed ? Default <code>FALSE</code>.</p></dd>


<dt id="arg-dev">dev<a class="anchor" aria-label="anchor" href="#arg-dev"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> If <code>TRUE</code>, development mode is enabled. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a>. Should intermediate messages be printed during the execution of the function ? Default <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> containing the extracted variable, or a named <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> for each extracted variable if <code>expand</code> is <code>TRUE</code>. This output follows the same format as the input data described in <code>data</code>, making it possible to iterate over this output using <code>process_extraction()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>

<ul><li><p><code>compress</code> and <code>expand</code> cannot be both set to TRUE for <code>time_step</code> set to <code>"year-month"</code> or <code>"year-season"</code>.</p></li>
<li><p><code>NA</code> values are considered missing values and are used to compute the percentage of gaps over each time step, potentially removing the results if the percentage exceeds <code>NApct_lim</code>.</p></li>
<li><p><code>NaN</code> values are considered non-existent values but can also be computation artifacts, for example, when the <code>keep</code> option is used. For speed performance reasons, <code>NaN</code> values are needed as masked values for input time series that are not daily and are extracted throughout the year.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="process_trend.html">process_trend()</a></code> for performing trend analysis on extracted variables.</p></li>
<li><p><code><a href="CARD_extraction.html">CARD_extraction()</a></code> for extracting variables using CARD parameterization files.</p></li>
<li><p><code><a href="CARD_management.html">CARD_management()</a></code> for managing CARD parameterization files.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Creation of random data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">99</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Start</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-02-01"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">End</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-04-04"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span><span class="va">Start</span>, <span class="va">End</span>, by<span class="op">=</span><span class="st">"day"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First time serie</span></span></span>
<span class="r-in"><span><span class="va">data_1</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>time<span class="op">=</span><span class="va">Date</span>,</span></span>
<span class="r-in"><span>                       X_state1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span>, <span class="fl">1e4</span>, <span class="fl">1e3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       X_state2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">1e2</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       id<span class="op">=</span><span class="st">"serie 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data_1</span><span class="op">$</span><span class="va">X_state2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Second time serie</span></span></span>
<span class="r-in"><span><span class="va">data_2</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>time<span class="op">=</span><span class="va">Date</span>,</span></span>
<span class="r-in"><span>                       X_state1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span>, <span class="fl">1e4</span>, <span class="fl">1e3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       X_state2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">1e2</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       id<span class="op">=</span><span class="st">"serie 2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data_2</span><span class="op">$</span><span class="va">X_state2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Final data for testing</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">data_1</span>, <span class="va">data_2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Extraction of the yearly average of daily value.</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XA_state1<span class="op">=</span><span class="va">mean</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state1"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"year"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 22 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id      time       XA_state1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> serie 1 2000-01-01    <span style="text-decoration: underline;">21</span>092.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> serie 1 2001-01-01    <span style="text-decoration: underline;">21</span>468.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> serie 1 2002-01-01    <span style="text-decoration: underline;">21</span>895.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> serie 1 2003-01-01    <span style="text-decoration: underline;">22</span>232.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> serie 1 2004-01-01    <span style="text-decoration: underline;">22</span>656.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> serie 1 2005-01-01    <span style="text-decoration: underline;">22</span>999.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> serie 1 2006-01-01    <span style="text-decoration: underline;">23</span>357.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> serie 1 2007-01-01    <span style="text-decoration: underline;">23</span>605.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> serie 1 2008-01-01    <span style="text-decoration: underline;">24</span>223.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> serie 1 2009-01-01    <span style="text-decoration: underline;">24</span>421.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 12 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Extraction of the median of the yearly maximum of the monthly</span></span></span>
<span class="r-in"><span><span class="co"># averages of daily values.</span></span></span>
<span class="r-in"><span><span class="co"># Three steps are needed for this case, the first one is the</span></span></span>
<span class="r-in"><span><span class="co"># monthly average over years.</span></span></span>
<span class="r-in"><span><span class="va">dataEX_tmp</span> <span class="op">=</span></span></span>
<span class="r-in"><span>    <span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                       funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>X_month_state2<span class="op">=</span><span class="va">mean</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       time_step<span class="op">=</span><span class="st">"year-month"</span>,</span></span>
<span class="r-in"><span>                       NApct_lim<span class="op">=</span><span class="fl">20</span>,</span></span>
<span class="r-in"><span>                       rmNApct<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Missing values represented by NA are handled.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dataEX_tmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 246 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id      time       X_month_state2 NApct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> serie 1 2000-02-01        -<span style="color: #BB0000;">0.088</span><span style="color: #BB0000; text-decoration: underline;">3</span>   6.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> serie 1 2000-03-01         0.205    6.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> serie 1 2000-04-01         0.837    6.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> serie 1 2000-05-01         0.737    6.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> serie 1 2000-06-01         1.35    19.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> serie 1 2000-07-01         1.55     9.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> serie 1 2000-08-01         2.39    16.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> serie 1 2000-09-01         2.41    13.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> serie 1 2000-10-01         2.56     9.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> serie 1 2000-11-01        <span style="color: #BB0000;">NA</span>       23  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 236 more rows</span></span>
<span class="r-in"><span><span class="co"># In this second step, for the yearly maximum, the sampling period</span></span></span>
<span class="r-in"><span><span class="co"># for each year is modified to a fixed value.</span></span></span>
<span class="r-in"><span><span class="va">dataEX_tmp</span> <span class="op">=</span></span></span>
<span class="r-in"><span>    <span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">dataEX_tmp</span>,</span></span>
<span class="r-in"><span>                       funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XX_state2<span class="op">=</span><span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_month_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       sampling_period<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"05-01"</span>, <span class="st">"11-30"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       time_step<span class="op">=</span><span class="st">"year"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Finaly, the median is computed</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">dataEX_tmp</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>med_XX_state2<span class="op">=</span><span class="va">median</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"XX_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      med_XX_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          19.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          18.7</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Extraction of the monthly average and the monthly maximum in a</span></span></span>
<span class="r-in"><span><span class="co"># single call.</span></span></span>
<span class="r-in"><span><span class="co"># The output is in long tibble format with 12 values for each time</span></span></span>
<span class="r-in"><span><span class="co"># serie.</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XA_state1<span class="op">=</span><span class="va">mean</span>,</span></span>
<span class="r-in"><span>                              XX_state2<span class="op">=</span><span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state1"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"month"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 24 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id      time       Month XA_state1 XX_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> serie 1 2000-01-01     1    <span style="text-decoration: underline;">22</span>997.      38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> serie 1 2000-02-01     2    <span style="text-decoration: underline;">22</span>933.      39.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> serie 1 2000-03-01     3    <span style="text-decoration: underline;">22</span>815.      40.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> serie 1 2000-04-01     4    <span style="text-decoration: underline;">22</span>774.      37.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> serie 1 2000-05-01     5    <span style="text-decoration: underline;">22</span>716.      35.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> serie 1 2000-06-01     6    <span style="text-decoration: underline;">22</span>747.      36.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> serie 1 2000-07-01     7    <span style="text-decoration: underline;">22</span>805.      36.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> serie 1 2000-08-01     8    <span style="text-decoration: underline;">22</span>755.      36.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> serie 1 2000-09-01     9    <span style="text-decoration: underline;">22</span>867.      37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> serie 1 2000-10-01    10    <span style="text-decoration: underline;">22</span>921.      38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 14 more rows</span></span>
<span class="r-in"><span><span class="co"># In this case, the output tibble is compress to have the date</span></span></span>
<span class="r-in"><span><span class="co"># indication in column. This also works for year-month extraction.</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XA_state1<span class="op">=</span><span class="va">mean</span>,</span></span>
<span class="r-in"><span>                              XX_state2<span class="op">=</span><span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state1"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"month"</span>,</span></span>
<span class="r-in"><span>                   compress<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 25</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_jan XA_state1_feb XA_state1_mar XA_state1_apr XA_state1_may</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>997.        <span style="text-decoration: underline;">22</span>933.        <span style="text-decoration: underline;">22</span>815.        <span style="text-decoration: underline;">22</span>774.        <span style="text-decoration: underline;">22</span>716.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">23</span>007.        <span style="text-decoration: underline;">22</span>869.        <span style="text-decoration: underline;">22</span>925.        <span style="text-decoration: underline;">22</span>724.        <span style="text-decoration: underline;">22</span>785.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 19 more variables: XA_state1_jun &lt;dbl&gt;, XA_state1_jul &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XA_state1_aug &lt;dbl&gt;, XA_state1_sep &lt;dbl&gt;, XA_state1_oct &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XA_state1_nov &lt;dbl&gt;, XA_state1_dec &lt;dbl&gt;, XX_state2_jan &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XX_state2_feb &lt;dbl&gt;, XX_state2_mar &lt;dbl&gt;, XX_state2_apr &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XX_state2_may &lt;dbl&gt;, XX_state2_jun &lt;dbl&gt;, XX_state2_jul &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XX_state2_aug &lt;dbl&gt;, XX_state2_sep &lt;dbl&gt;, XX_state2_oct &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   XX_state2_nov &lt;dbl&gt;, XX_state2_dec &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="co"># And in this last case, the output tibble is compress and then</span></span></span>
<span class="r-in"><span><span class="co"># expand in order to have a list of tibble for each variable.</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XA_state1<span class="op">=</span><span class="va">mean</span>,</span></span>
<span class="r-in"><span>                              XX_state2<span class="op">=</span><span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state1"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X_state2"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"month"</span>,</span></span>
<span class="r-in"><span>                   compress<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                   expand<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_jan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_jan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>997.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">23</span>007.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_feb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_feb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>933.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>869.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_mar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_mar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>815.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>925.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_apr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_apr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>774.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>724.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_may</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_may</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>716.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>785.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>747.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>771.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_jul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_jul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>805.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>832.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_aug</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_aug</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>755.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>858.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_sep</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_sep</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>867.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>805.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_oct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_oct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>921.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>824.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_nov</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_nov</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>930.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>854.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_state1_dec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_state1_dec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>995.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>954.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_jan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_jan</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          37.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_feb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_feb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          39.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_mar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_mar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          40.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          39.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_apr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_apr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          37.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_may</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_may</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          35.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          36.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          36.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          35.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_jul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_jul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          36.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          36.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_aug</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_aug</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          36.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          36.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_sep</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_sep</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          37.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_oct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_oct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          36.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_nov</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_nov</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          37.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_state2_dec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_state2_dec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2          37.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Extraction of the seasonal average and season maxium for both</span></span></span>
<span class="r-in"><span><span class="co"># columns using suffixes to avoid repetition with compress and</span></span></span>
<span class="r-in"><span><span class="co"># expand formating.</span></span></span>
<span class="r-in"><span><span class="fu">process_extraction</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                   funct<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>XA<span class="op">=</span><span class="va">mean</span>,</span></span>
<span class="r-in"><span>                              XX<span class="op">=</span><span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   funct_args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state1"</span>, <span class="st">"state2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   time_step<span class="op">=</span><span class="st">"season"</span>,</span></span>
<span class="r-in"><span>                   compress<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                   expand<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_MAM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_MAM_state1 XA_MAM_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>770.          17.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>816.          18.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_JJA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_JJA_state1 XA_JJA_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>769.          18.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>821.          18.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_SON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_SON_state1 XA_SON_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>906.          18.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>828.          19.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XA_DJF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XA_DJF_state1 XA_DJF_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">22</span>975.          19.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">22</span>943.          19.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_MAM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_MAM_state1 XX_MAM_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">27</span>793.          40.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">26</span>743.          39.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_JJA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_JJA_state1 XX_JJA_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">27</span>388.          36.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">27</span>411.          36.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_SON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_SON_state1 XX_SON_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">26</span>734.          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">26</span>829.          37.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $XX_DJF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id      XX_DJF_state1 XX_DJF_state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> serie 1        <span style="text-decoration: underline;">27</span>316.          39.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> serie 2        <span style="text-decoration: underline;">28</span>217.          38.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Benjamin Renard, Valentin Mansanarez, Louis Héraut.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

